(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4944:function(e,t,n){Promise.resolve().then(n.bind(n,7055))},7055:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(9268),s=n(6006);let l=(0,s.createContext)({});var a=n(6935),i=n(5507),o=n(3451),c=n(536),u=n(7106),h=n(9715),d=n(4893),x=n(1771),m=n(9714);let p=e=>{let{index:t}=e,{prompt:n,setPrompt:p}=(0,s.useContext)(l);return(0,r.jsxs)(i.Z,{direction:"row",spacing:1,children:[(0,r.jsxs)(o.Z,{sx:{width:"150px"},children:[(0,r.jsx)(c.Z,{id:"role-label",children:"Role"}),(0,r.jsxs)(u.Z,{labelId:"role-label",value:n[t].Role,label:"Role",onChange:e=>{n[t].Role=e.target.value,p([...n])},children:[(0,r.jsx)(h.Z,{value:"user",children:"User"}),(0,r.jsx)(h.Z,{value:"assistant",children:"Assistant"}),(0,r.jsx)(h.Z,{value:"system",children:"system"})]})]}),(0,r.jsx)(d.Z,{fullWidth:!0,value:n[t].Content,onChange:e=>{n[t].Content=e.target.value,p([...n])}}),(0,r.jsx)(x.Z,{display:"flex",alignItems:"center",children:(0,r.jsx)(m.Z,{sx:{mt:"auto",mb:"auto"},onClick:()=>p(n.filter((e,n)=>n!=t)),children:(0,r.jsx)(a.Z,{})})})]})};var j=n(2618),Z=n(4240),f=n(7931),g=n(1550),v=n(7726);let b=(0,s.createContext)({}),C=e=>{let{k:t}=e,{args:n,setArgs:l}=(0,s.useContext)(b);return(0,r.jsx)(i.Z,{direction:"row",spacing:1,children:(0,r.jsx)(d.Z,{label:t,fullWidth:!0,value:n[t],onChange:e=>{n[t]=e.target.value,l({...n})}})})};var y=n(4214),k=n(6008);function S(){let[e,t]=(0,s.useState)([{Role:"user",Content:""}]),[n,a]=(0,s.useState)({text:"sample"}),[o,c]=(0,s.useState)("");(0,k.useRouter)();let u=(0,k.useSearchParams)();(0,s.useEffect)(()=>{let e=u.get("prompt");e&&t(JSON.parse(e))},[]);let h=(0,s.useMemo)(()=>{let t=[];return e.forEach(e=>{t.push({...e}),Object.keys(n).forEach(r=>{t[t.length-1].Content=e.Content.replaceAll("{".concat(r,"}"),n[r])})}),t},[e,n]),d=(0,s.useMemo)(()=>{let t={};return e.forEach(e=>{let n=!1,r="";Array.from(e.Content).forEach(e=>{"{"==e?(n=!0,r=""):"}"==e?(n=!1,t[r]=""):n&&(r+=e)})}),a(t),Object.keys(t).map(e=>(0,r.jsx)(C,{k:e},e))},[e]),S=(0,s.useMemo)(()=>(history.replaceState(null,"","/?prompt=".concat(JSON.stringify(e))),e.map((e,t)=>(0,r.jsx)(p,{index:t},t))),[e]),E=async()=>{console.log(JSON.stringify({prompt:h}));let e=await (0,y.Z)({url:"".concat("https://gpt-playground-backend-o3mmnjeefa-an.a.run.app","/chatgpt"),method:"post",data:{prompt:h}});c(e.data)};return(0,r.jsx)(b.Provider,{value:{args:n,setArgs:a},children:(0,r.jsx)(l.Provider,{value:{prompt:e,setPrompt:t},children:(0,r.jsxs)(j.Z,{maxWidth:"md",sx:{mt:4},children:[(0,r.jsx)(Z.Z,{variant:"h2",mb:4,children:"GPT Playground"}),(0,r.jsx)(Z.Z,{variant:"h3",mb:2,children:"Input"}),(0,r.jsx)(i.Z,{spacing:2,mb:4,children:d}),(0,r.jsx)(f.Z,{sx:{float:"right"},variant:"contained",endIcon:(0,r.jsx)(g.Z,{}),onClick:()=>E(),children:"Send"}),(0,r.jsx)(Z.Z,{variant:"h3",mb:2,mt:8,children:"Result"}),(0,r.jsx)(Z.Z,{variant:"h4",mb:2,children:o}),(0,r.jsx)(Z.Z,{variant:"h3",mb:2,mt:30,children:"Prompt"}),(0,r.jsxs)(i.Z,{spacing:2,mb:4,children:[S,(0,r.jsx)(x.Z,{children:(0,r.jsx)(m.Z,{sx:{float:"right"},onClick:()=>{e.push({Role:"user",Content:""}),t([...e])},children:(0,r.jsx)(v.Z,{})})})]}),(0,r.jsx)(Z.Z,{mb:2,children:JSON.stringify(h)})]})})})}}},function(e){e.O(0,[928,667,488,744],function(){return e(e.s=4944)}),_N_E=e.O()}]);